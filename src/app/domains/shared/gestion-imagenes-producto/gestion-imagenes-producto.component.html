<div class="container mt-4">
  <h3>Gestionar Imágenes del Producto</h3>

  <!-- Formulario Reactivo -->
  <form [formGroup]="imagenesForm" (ngSubmit)="onSubmit()">

    <!-- Input para seleccionar archivos -->
    <div class="form-group">
      <label for="imagenes">Selecciona hasta 3 imágenes</label>
      <input
        type="file"
        id="imagenes"
        class="form-control"
        multiple
        accept="image/*"
        (change)="onFileSelected($event)"
        formControlName="imagenesInput"
      >
      <!-- Mensaje de error si no se seleccionan archivos -->
      <div *ngIf="imagenesForm.get('imagenesInput')?.touched && imagenesForm.get('imagenesInput')?.errors?.['required']" class="text-danger mt-1">
        Debes seleccionar al menos una imagen.
      </div>
    </div>

    <!-- Sección de Vistas Previas -->
    <div *ngIf="previews.length > 0" class="mt-3">
      <h4>Vistas Previas:</h4>
      <div class="d-flex flex-wrap">
        <div *ngFor="let preview of previews" class="preview-container">
          <img [src]="preview" class="img-thumbnail" alt="Vista previa">
        </div>
      </div>
    </div>

    <!-- Botón de envío -->
    <button type="submit" class="btn btn-primary mt-3" [disabled]="!imagenesForm.valid || archivosSeleccionados.length === 0">
      Guardar Imágenes
    </button>
  </form>
</div>

<!-- Un poco de CSS para las vistas previas -->
<style>
  .preview-container {
    margin: 5px;
  }
  .img-thumbnail {
    width: 150px;
    height: 150px;
    object-fit: cover;
  }
</style>
